# frozen_string_literal: true

RSpec.describe ActiveBrainz::<%= class_name %>, type: :model do
  subject(:<%= table_name %>) { build(:<%= table_name %>) }
  <%- if gid? -%>
  it_behaves_like "it has a GID"
  <%- end -%>
  <%- if begin_end_date? -%>
  it_behaves_like "it has a begin and end date"
  <%- end -%>
  <%- if references.any? -%>

  <%- references.each do |ref| %>
  <%- if ref.type == :has_many -%>
  it { is_expected.to have_many :<%= ref.name %> }
  <%- else -%>
  <%- if ref.null -%>
  it { is_expected.to belong_to(:<%= ref.name %>).optional }
  <%- else -%>
  it { is_expected.to belong_to :<%= ref.name %> }
  <%- end -%>
  <%- end -%>
  <%- end -%>
  <%- end -%>
  <%- if attributes.any? -%>

  <%- filtered_attributes.each do |attr| -%>
  it { is_expected.to respond_to :<%= attr.name %> }
  <%- end -%>
  <%- end -%>
end

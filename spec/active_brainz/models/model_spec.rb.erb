# frozen_string_literal: true

RSpec.describe ActiveBrainz::<%= class_name %> do
  subject(:<%= table_name %>) { build(:<%= table_name %>) }
  <%- if gid? -%>

  it_behaves_like "it has a GID"
  <%- end -%>
  <%- if references.any? -%>

  <%- references.each do |ref| %>
  <%- if ref.type == :has_many -%>
  it { is_expected.to have_many :<%= ref.name %> }
  <%- else -%>
  <%- if ref.null -%>
  it { is_expected.to belong_to(:<%= ref.name %>).optional }
  <%- else -%>
  it { is_expected.to belong_to :<%= ref.name %> }
  <%- end -%>
  <%- end -%>
  <%- end -%>
  <%- end -%>
  <%- if attributes.any? -%>

  <%- attributes.reject { |a| a.name == "gid" }.each do |attr| -%>
  it { is_expected.to have_attributes :<%= attr.name %> }
  <%- end -%>
  <%- end -%>
end
